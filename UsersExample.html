<html>
   <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
        <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.slim.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">
        <link rel="stylesheet" href="style.css">
        <title>Users Example</title>
    </head>
    <body class="HeroBodyUsers">
        <div>
            <button id="BtnBackHome" class="BtnBackHome">
                <i class="bi bi-house"></i>
            </button>
        </div>
        <div class="OptionMenuUsers">          
            <table class="TblButtonsUser">
                <thead>
                    <tr>
                        <td>
                            <p class="TextButtons">To add a new user please click in the button</p>
                        </td>
                        <td>
                            <p class="TextButtons">To see a list of users please click in the <br>
                                button
                            </p>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <button class="btnAddUser" id="BtbModalAddUsers" data-toggle="modal" data-target="#ModalAddUsers">
                                <i class="bi bi-person-plus-fill"></i>
                            </button>
                        </td>
                        <td>
                            <button class="btnListUser" id="BtbModalTableUsers" data-toggle="modal" data-target="#ModalTableUsers">
                                <i class="bi bi-people-fill"></i>
                            </button>
                        </td>
                    </tr>
                </thead>
            </table>
        </div>

        <div class="modal fade" data-backdrop="static" data-keyboard="false" id="ModalAddUsers">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-body ModalBody">
                        <div class="ModalContent">
                            <form id="RegisterUsersInputs">
                                <p class="TitleForm">Please fill all the inputs</p>
                                <label class="LabelsUsers">Name</label>
                                <br>
                                <input type="text" id="UserName" required class="InputsUsers">
                                <br>
                                <label class="LabelsUsers">First Last Names</label>
                                <br>
                                <input type="text" id="UserLastNamesOne" required class="InputsUsers">
                                <br>
                                <label class="LabelsUsers">Second Last Name</label>
                                <br>
                                <input type="text" id="UserLastNameTwo" required class="InputsUsers">
                                <br>
                                <label class="LabelsUsers">Birthday</label>
                                <br>
                                <label class="LabelsUsers">Day</label>
                                <br>
                                <select id="BornDay" required class="InputsUsers"></select>
                                <br>
                                <label class="LabelsUsers">Month</label>
                                <br>
                                <select id="BornMonth" required class="InputsUsers"></select>
                                <br>
                                <label class="LabelsUsers">Year</label>
                                <br>
                                <select id="BornYear" required class="InputsUsers"></select>
                                <br>
                                <button type="button" class="BtnAddNewUsers" id="BtnAddUsers" data-toggle="modal" data-target="#ModalAlertAddUsers">Add</button>
                            </form>
                        </div>
                        <div>
                            <button type="button" class="btn btn-danger" data-dismiss="modal" id="BtnCloseModalAddUsers">Close</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal fade" data-backdrop="static" data-keyboard="false" id="ModalTableUsers">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-body ModalBody">
                        <div class="ModalContent">
                            <div>
                                <button type="button" class="btn btn-danger" data-dismiss="modal" id="BtnCloseModalListUsers">Close</button>
                            </div>
                            <div>
                                <label class="LabelsUsers">Sort by</label>
                                <select id="SelectSorbTable" class="InputsUsers">
                                    <option value="1">Name</option>
                                    <option value="2">Last Name</option>
                                    <option value="3">Birthday</option>
                                    <option value="4">Id</option>
                                </select>
                            </div>
                            <div>
                                <table id="TableUsers" class="TblUsers table-bordered">
                                    <thead class="TheadUsers">
                                        <tr>
                                            <th>Name</th>
                                            <th>Last Name</th>
                                            <th>Birthday</th>
                                            <th>Id</th>
                                        </tr>
                                    </thead>
                                    <tbody id="TBodyUsers">
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal fade" id="ModalAlertAddUsers">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-body ModalBody">
                        <div class="ModalContent" id="ModalBodyAlerts">
                            
                        </div>
                        <div id="DivBtnsAddUsers">
                            <button class="btn btn-primary" id="CorrectUser" data-dismiss="modal">Yes</button>
                            <button class="btn btn-danger" id="CancelUser" data-dismiss="modal">No</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </body>
    <script>
        //Inputs Files
        let userName = document.getElementById("UserName");
        let userLastName1 = document.getElementById("UserLastNamesOne");
        let userLastName2 = document.getElementById("UserLastNameTwo");
        let userBornDay = document.getElementById("BornDay");
        let userBornMonth = document.getElementById("BornMonth");
        let userBornYear = document.getElementById("BornYear");
        let btnAddUsers = document.getElementById("BtnAddUsers");
        let TblUsers = document.getElementById("TBodyUsers");
        let DivInputsUsers = document.getElementById("RegisterUsersInputs");
        let SortTableSelect = document.getElementById("SelectSorbTable");
        let AlertModal = document.getElementById("ModalAlert");
        let CloseModalBtn = document.getElementById("BtnCloseModal");
        let BtnBackMenu = document.getElementById("BtnBackHome");
        let ModalUsersAlert = document.getElementById("ModalAlertAddUsers");
        let _messagealert = document.getElementById("MessageAlertModal");
        let addP = document.getElementById("ModalBodyAlerts");
        let _addData = document.getElementById("CorrectUser");
        const UsersRegistrer = [];
        //adding options for months
        const _monthsArray = [
            {month: "January", value: 01},
            {month: "February", value: 02},
            {month: "March", value: 03},
            {month: "April", value: 04},
            {month: "May", value: 05},
            {month: "June", value: 06},
            {month: "July", value: 07},
            {month: "August", value: 08},
            {month: "September", value: 09},
            {month: "October", value: 10},
            {month: "November", value: 11},
            {month: "December", value: 12}
        ];
        function OptionsMonths (_monthsArray){
            let _optionsmonth = "";
            for(let Months of _monthsArray){
                _optionsmonth +=`<option value=${Months.value}>${Months.month}</option>`;
            }
            userBornMonth.innerHTML = _optionsmonth;
        }
        OptionsMonths(_monthsArray);
        //adding options for day select
        userBornMonth.addEventListener("change" ,  function(){
            let valuemonth = userBornMonth.value;
            let _maxdayopt = 0;
            if(valuemonth == 2){
                _maxdayopt = 29;
            }
            else{
                _maxdayopt = 31;
            }
            let selectday = ""; 
            for(let _days = 1; _days <= _maxdayopt; _days++){
                selectday += `<option value=${_days}>${_days}</option>`
                userBornDay.innerHTML = selectday;
            }
        });
        let selectdaydefault = ""; 
        for(let _days = 1; _days <= 31; _days++){
            selectdaydefault += `<option value=${_days}>${_days}</option>`
            userBornDay.innerHTML = selectdaydefault;
        }
        //adding options for year select
        let selectyear = "";
        for(let _years = 1970; _years <= 2000; _years++){
            selectyear += `<option value=${_years}>${_years}</option>`
            userBornYear.innerHTML = selectyear;
        }
        //checking data who going to be pushed to array 
        btnAddUsers.addEventListener("click" ,  function(){
            let _userName = userName.value;
            let _userLastName1 = userLastName1.value;
            let _userLastName2 = userLastName2.value;
            let _userBornDay = userBornDay.value;
            let _userBornMonth = userBornMonth.value;
            let _userBornYear = userBornYear.value;
            let _p = "";
            if(_userName == "" || _userLastName1 == "" || _userLastName2 == "" || _userBornDay == "" || _userBornMonth == "" || _userBornYear == "" )
            {
                _p +=`
                    <p>
                        An Empty field have been detected!!
                    </p>`;
                addP.innerHTML = _p;
                document.getElementById("DivBtnsAddUsers").style.display = "none";
            }
            else
            {
                _p +=`
                    <p>
                        User will be added with the next info</br>
                        Name: ${_userName.toUpperCase()} ${_userLastName1.toUpperCase()} ${_userLastName2.toUpperCase()}</br>
                        BirthDay: ${_userBornDay}/${_userBornMonth}/${_userBornYear}</br>
                        the data is correct?</br>
                    </p>`;
                addP.innerHTML = _p;
                document.getElementById("DivBtnsAddUsers").style.display = "block";
            }
        });

        _addData.addEventListener("click" , function(){
            let _userName = userName.value;
            let _name = _userName.substring(0, 2).toUpperCase();
            let _userLastName1 = userLastName1.value;
            let _lastname1 = _userLastName1.substring(0, 2).toUpperCase();
            let _userLastName2 = userLastName2.value;
            let _lastname2 = _userLastName2.substring(0, 2).toUpperCase();
            let _userBornDay = userBornDay.value;
            let _day = _userBornDay.substring(0, 2);
            let _userBornMonth = userBornMonth.value;
            let _month = _userBornMonth.substring(0, 2);
            let _userBornYear = userBornYear.value;
            let _year = _userBornYear.substring(2, 4);
            const UserData = {
                _DataName: _userName.toUpperCase(),
                _DataLastName: _userLastName1.toUpperCase()+" "+_userLastName2.toUpperCase(),
                _DataBirthDay: _userBornDay+"/"+_userBornMonth+"/"+_userBornYear,
                _DataId: _name+_lastname1+_lastname2+_day+_month+_year
            };
            UsersRegistrer.push(UserData);
            DivInputsUsers.reset();
            const UserSortNames = UsersRegistrer.sort((_user1, _user2) => {
                return (_user1._DataName < _user2._DataName) ? -1 : 1
            });
            console.table(UsersRegistrer);
            TableUsers(UsersRegistrer);
        });

        //building the table from the data of the array UserRegistrer
        function TableUsers (UsersRegistrer) {
            let TableUserBody = "";
            for(let Users of UsersRegistrer){
                TableUserBody +=`
                <tr class="TrUsers">
                    <td>${Users._DataName}</td>
                    <td>${Users._DataLastName}</td>
                    <td>${Users._DataBirthDay}</td>
                    <td>${Users._DataId}</td>
                </tr>`;
            }
            TblUsers.innerHTML = TableUserBody;
        }
        //sorting the data of the table 
        SortTableSelect.addEventListener("change" ,  function SortingTable(){
            let ValueSort = SortTableSelect.value;
            if(ValueSort == 1){
                const UserSortNames = UsersRegistrer.sort((_user1, _user2) => {
                    return (_user1._DataName < _user2._DataName) ? -1 : 1
                });
                TableUsers(UsersRegistrer);
            }
            if(ValueSort == 2){
                const UserSortNames = UsersRegistrer.sort((_user1, _user2) => {
                    return (_user1._DataLastName < _user2._DataLastName) ? -1 : 1
                });
                TableUsers(UsersRegistrer);
            }
            if(ValueSort == 3){
                const UserSortNames = UsersRegistrer.sort((_user1, _user2) => {
                    if(_user1._DataBirthDay < _user2._DataBirthDay){
                        return -1;
                    }
                    if(_user1._DataBirthDay > _user2._DataBirthDay){
                        return 1;
                    }
                    return 0;
                });
                TableUsers(UsersRegistrer);
            }
            if(ValueSort == 4){
                const UserSortNames = UsersRegistrer.sort((_user1, _user2) => {
                    return (_user1._DataId < _user2._DataId) ? -1 : 1
                });
                TableUsers(UsersRegistrer);
            }
            console.table(UsersRegistrer);
        });
        //button to back to index
        BtnBackMenu.addEventListener("click" , function(){
            window.open('index.html' , '_self');
        });
    </script>
</html>